<<<<<<< HEAD
\begin{Exercise}[title={进程},difficulty=2]
\label{ex:processes}
\Question\label{ex:processes q1}
编写一个程序，列出所有正在运行的进程，并打印每个进程执行的子进程个数。
输出应当类似：
=======
\begin{Exercise}[title={Processes},difficulty=2]
\label{ex:processes}
\Question\label{ex:processes q1}
Write a program that takes a list of all running processes and prints
how many child processes each parent has spawned. The output should
look like:
>>>>>>> 9d3c4dbbba2dd6ce9e8c33dbfcbd0d7ca7842eb7
%% For some reason the spacing in Exercise env. does weird things
\vskip\baselineskip
\begin{display}
Pid 0 has 2 children: [1 2]
Pid 490 has 2 children: [1199 26524]
Pid 1824 has 1 child: [7293]
\end{display}
\vskip\baselineskip
\begin{itemize}
<<<<<<< HEAD
\item{为了获取进程列表，需要得到 \verb|ps -e -opid,ppid,comm| 的输出。输出类似：
=======
\item{For acquiring the process list, you'll need to capture the output
of \verb|ps -e -opid,ppid,comm|. This output looks like:
>>>>>>> 9d3c4dbbba2dd6ce9e8c33dbfcbd0d7ca7842eb7
\vskip\baselineskip
\begin{display}
  PID  PPID COMMAND
 9024  9023 zsh
19560  9024 ps
\end{display}
\vskip\baselineskip}
<<<<<<< HEAD
\item{如果父进程有一个子进程，就打印 \verb|child|，如果多于一个，就打印 \verb|children|；}
\item{进程列表要按照数字排序，这样就以 pid 0 开始，依次展示。}
\end{itemize}
这里有一个 Perl 版本的程序来帮助上手（或者造成绝对的混乱）。
=======
\item{If a parent has one child you must print \verb|child|, if there is
more than one print \verb|children|;}
\item{The process list must be numerically sorted, so you start with 
pid 0 and work your way up.}
\end{itemize}
Here is a Perl version to help you on your way (or to create complete
and utter confusion).
>>>>>>> 9d3c4dbbba2dd6ce9e8c33dbfcbd0d7ca7842eb7
\lstinputlisting[caption={Processes in Perl}]{ex-communication/src/proc.pl}
\end{Exercise}

\begin{Answer}
<<<<<<< HEAD
\Question 有许多工作需要做。可以将程序分为以下几个部分：
\begin{enumerate}
\item{运行 \verb|ps| 获得输出；}
\item{解析输出并保存每个 PPID 的子 PID；}
\item{排序 PPID 列表；}  
\item{打印排序后的列表到屏幕。}
\end{enumerate}
在下面的解法中，使用了一个 \type{map[int][]int}，就是一个使用整数作为 map 的索引，元素是整数的 slice —— 用于保存 PID。内建的 \func{append} 被用于扩展这个整数的 slice。

程序清单：
\lstinputlisting[caption=Go 中的进程]{ex-communication/src/proc.go}
=======
\Question There is lots of stuff to do here. We can divide our program
up in the following sections:
\begin{enumerate}
\item{Starting \verb|ps| and capturing the output;}
\item{Parsing the output and saving the child PIDs for each PPID;}
\item{Sorting the PPID list;}
\item{Printing the sorted list to the screen}
\end{enumerate}
In the solution presented below, we've used a \type{map[int][]int},
i.e. a map indexed with integers, pointing to a slice of ints -- which holds the
PIDs. The builtin \func{append} is used to grow the integer slice. 

A possible program is: 
\lstinputlisting[caption=Processes in Go]{ex-communication/src/proc.go}
>>>>>>> 9d3c4dbbba2dd6ce9e8c33dbfcbd0d7ca7842eb7
\end{Answer}
