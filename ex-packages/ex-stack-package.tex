\begin{Exercise}[title={stack 包},difficulty=0]
\label{ex:stack-package}
\Question\label{ex:stack-package q1} 
参考 Q\ref{ex:stack} 练习。在这个练习中将从那个代码中建立一个独立的包。
为 stack 的实现创建一个合适的包，\func{Push}、\func{Pop} 和 \type{Stack} 类型需要被导出。

\Question\label{ex:stack-package q2} 为这个包编写一个单元测试，
至少测试 \func{Push} 后 \func{Pop} 的工作情况。

\end{Exercise}

\begin{Answer}
\Question 在创建 stack 包时，仅有一些小细节需要修改。
首先，导出的函数应当大写首字母，因此应该是 \type{Stack}。
包所在的文件被命名为 \file{stack-as-package.go}，内容是：
\lstinputlisting[caption=包里的 Stack]{ex-packages/src/stack-as-package.go}

\Question 为了让单元测试正常工作，需要做一些准备。
下面用一分钟的时间来做这些。首先是单元测试本身。
创建文件 \file{pushpop\_test.go}，有如下内容：
\lstinputlisting[caption=Push/Pop 测试]{ex-packages/src/pushpop_test.go}
为了让 \prog{go test} 能够工作，需要将包所在文件放到 
\var{\$GOPATH/src}：\\

\begin{display}
\pr \user{mkdir $GOPATH/src/stack}
\pr \user{cp pushpop_test.go $GOPATH/src/stack}
\pr \user{cp stack-as-package.go $GOPATH/src/stack}
\end{display}

输出：\\

\begin{display}
\pr \user{go test stack}
PASS
ok      stack   0.001s
\end{display}
\end{Answer}
